<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>All Creators | Content Hub</title>
  <link rel="stylesheet" href="https://rw-501.github.io/contenthub/css/main.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="module" src="https://rw-501.github.io/contenthub/js/creators.js" defer></script>
  <script type="module" src="https://rw-501.github.io/contenthub/js/firebase-config.js" defer></script>
</head>
<body>


        <div id="toolbarContainer"></div>

  <!-- Your page content here -->

  <!-- Include Bootstrap JS (required for navbar) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Inject toolbar -->
  <script type="module">
    const toolbarContainer = document.getElementById("toolbarContainer");
    const html = await fetch('https://rw-501.github.io/contenthub/includes/nav.html').then(res => res.text());
    toolbarContainer.innerHTML = html;
    import('https://rw-501.github.io/contenthub/includes/nav.js');
  </script>


<!-- Main Section -->
  <main id="main">

<div class="container py-4">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4">
      <h2 class="fw-bold">All Creators</h2>
      <div class="d-flex gap-2">
        <input type="text" id="searchInput" class="form-control" placeholder="Search by name or tag...">

        </div>

      <div class="d-flex gap-2">
        <select id="contentTypeFilter" class="form-select">
  <option value="">All Content Types</option>
  <option value="tutorials">Tutorials</option>
  <option value="vlogs">Vlogs</option>
  <option value="skits">Skits</option>
  <option value="podcasts">Podcasts</option>
  <option value="reviews">Reviews</option>
  <option value="livestreams">Livestreams</option>
  <option value="short reels">Short Reels</option>
  <option value="unboxings">Unboxings</option>
  <option value="behind-the-scenes">Behind-the-Scenes</option>
  <option value="storytimes">Storytimes</option>
  <option value="challenges">Challenges</option>
  <option value="interviews">Interviews</option>
  <option value="q&a">Q&A</option>
  <option value="comedy sketches">Comedy Sketches</option>
  <option value="news recaps">News Recaps</option>
  <option value="animations">Animations</option>
  <option value="music videos">Music Videos</option>
</select>

<select id="nicheFilter" class="form-select">
  <option value="">All Niches</option>
  <option value="music">Music</option>
  <option value="gaming">Gaming</option>
  <option value="fashion">Fashion</option>
  <option value="fitness">Fitness</option>
  <option value="comedy">Comedy</option>
  <option value="lifestyle">Lifestyle</option>
  <option value="tutorials">Tutorials</option>
  <option value="vlogging">Vlogging</option>
  <option value="tech">Tech</option>
  <option value="beauty">Beauty</option>
  <option value="education">Education</option>
  <option value="food & cooking">Food & Cooking</option>
  <option value="travel">Travel</option>
  <option value="motivation">Motivation</option>
  <option value="health & wellness">Health & Wellness</option>
  <option value="diy & crafts">DIY & Crafts</option>
  <option value="finance & investing">Finance & Investing</option>
  <option value="parenting">Parenting</option>
  <option value="photography">Photography</option>
  <option value="pets & animals">Pets & Animals</option>
  <option value="art & design">Art & Design</option>
  <option value="product reviews">Product Reviews</option>
  <option value="unboxing">Unboxing</option>
  <option value="asmr">ASMR</option>
  <option value="skits & acting">Skits & Acting</option>
  <option value="memes">Memes</option>
  <option value="spirituality">Spirituality</option>
  <option value="cars & motorsports">Cars & Motorsports</option>
  <option value="real estate">Real Estate</option>
  <option value="book reviews">Book Reviews</option>
</select>

<select id="locationFilter" class="form-select">
  <option value="">All Locations</option>
  <option value="Alabama">Alabama</option>
  <option value="Alaska">Alaska</option>
  <option value="Arizona">Arizona</option>
  <option value="Arkansas">Arkansas</option>
  <option value="California">California</option>
  <option value="Colorado">Colorado</option>
  <option value="Connecticut">Connecticut</option>
  <option value="Delaware">Delaware</option>
  <option value="Florida">Florida</option>
  <option value="Georgia">Georgia</option>
  <option value="Hawaii">Hawaii</option>
  <option value="Idaho">Idaho</option>
  <option value="Illinois">Illinois</option>
  <option value="Indiana">Indiana</option>
  <option value="Iowa">Iowa</option>
  <option value="Kansas">Kansas</option>
  <option value="Kentucky">Kentucky</option>
  <option value="Louisiana">Louisiana</option>
  <option value="Maine">Maine</option>
  <option value="Maryland">Maryland</option>
  <option value="Massachusetts">Massachusetts</option>
  <option value="Michigan">Michigan</option>
  <option value="Minnesota">Minnesota</option>
  <option value="Mississippi">Mississippi</option>
  <option value="Missouri">Missouri</option>
  <option value="Montana">Montana</option>
  <option value="Nebraska">Nebraska</option>
  <option value="Nevada">Nevada</option>
  <option value="New Hampshire">New Hampshire</option>
  <option value="New Jersey">New Jersey</option>
  <option value="New Mexico">New Mexico</option>
  <option value="New York">New York</option>
  <option value="North Carolina">North Carolina</option>
  <option value="North Dakota">North Dakota</option>
  <option value="Ohio">Ohio</option>
  <option value="Oklahoma">Oklahoma</option>
  <option value="Oregon">Oregon</option>
  <option value="Pennsylvania">Pennsylvania</option>
  <option value="Rhode Island">Rhode Island</option>
  <option value="South Carolina">South Carolina</option>
  <option value="South Dakota">South Dakota</option>
  <option value="Tennessee">Tennessee</option>
  <option value="Texas">Texas</option>
  <option value="Utah">Utah</option>
  <option value="Vermont">Vermont</option>
  <option value="Virginia">Virginia</option>
  <option value="Washington">Washington</option>
  <option value="West Virginia">West Virginia</option>
  <option value="Wisconsin">Wisconsin</option>
  <option value="Wyoming">Wyoming</option>
</select>


<select id="platformFilter" class="form-select">
  <option value="">All Platforms</option>
  <option value="instagram">Instagram</option>
  <option value="tiktok">TikTok</option>
  <option value="youtube">YouTube</option>
  <option value="facebook">Facebook</option>
  <option value="twitch">Twitch</option>
  <option value="threads">Threads</option>
  <option value="snapchat">Snapchat</option>
  <option value="pinterest">Pinterest</option>
  <option value="reddit">Reddit</option>
</select>


      </div>
    </div>

    <div class="row g-4" id="creatorsGrid">
      <!-- Creator cards injected here -->
    </div>

</div>

  </main>

<!-- Add this at the bottom of <body> -->
<div id="footerContainer"></div>

<script type="module">
  const footer = await fetch('https://rw-501.github.io/contenthub/includes/footer.html').then(res => res.text());
  document.getElementById('footerContainer').innerHTML = footer;
  import('https://rw-501.github.io/contenthub/includes/footer.js');
</script>



  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyALJLxSJthWI2tnQZ-WnK1DDQNEelUCr7s",
      authDomain: "content-hub-11923.firebaseapp.com",
      projectId: "content-hub-11923",
      storageBucket: "content-hub-11923.appspot.com",
      messagingSenderId: "1021963959280",
      appId: "1:1021963959280:web:68155134c25cc38dcdfb35",
      measurementId: "G-6G9VXCGFTG"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const creatorsGrid = document.getElementById("creatorsGrid");
    const searchInput = document.getElementById("searchInput");
    const contentTypeFilter = document.getElementById("contentTypeFilter");
    const nicheFilter = document.getElementById("nicheFilter");
    const locationFilter = document.getElementById("locationFilter");
    const platformFilter = document.getElementById("platformFilter");


    let creators = [];



    async function fetchCreators() {
      const snapshot = await getDocs(collection(db, "users"));
      creators = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      renderCreators(creators);
    }

    function renderCreators(data) {
      creatorsGrid.innerHTML = "";
      if (data.length === 0) {
        creatorsGrid.innerHTML = '<p class="text-center text-muted">No creators found.</p>';
        return;
      }

data.forEach(user => {
  const isVerified = user.verified === true;
  const verifiedPlatforms = user.verifiedPlatforms || {}; // { instagram: true, facebook: true, ... }

  const badge = isVerified
    ? `<span class="ms-1 text-primary" title="Verified"><i class="bi bi-patch-check-fill"></i></span>`
    : '';

  const platformIcons = Object.entries(verifiedPlatforms)
    .filter(([_, verified]) => verified)
    .map(([platform]) => {
      const icons = {
    instagram: "bi bi-instagram",
  tiktok: "bi bi-tiktok",
  youtube: "bi bi-youtube",
  facebook: "bi bi-facebook",
  twitter: "bi bi-twitter",
  linkedin: "bi bi-linkedin",
  twitch: "bi bi-twitch",
  threads: "bi bi-threads",
  snapchat: "bi bi-snapchat",
  pinterest: "bi bi-pinterest",
  reddit: "bi bi-reddit",
  other: "bi bi-link-45deg"
};
      return `<i class="${icons[platform] || ''} text-muted ms-1" title="Verified on ${platform.charAt(0).toUpperCase() + platform.slice(1)}"></i>`;
    }).join('');

  const card = document.createElement("div");
  card.className = "col-sm-6 col-md-4 col-lg-3";
  card.innerHTML = `
    <a href="https://rw-501.github.io/contenthub/pages/profile.html?uid=${user.id}" class="text-decoration-none text-dark">
      <div class="card shadow-sm h-100">
        <img src="${user.photoURL || '/assets/default-avatar.png'}" class="card-img-top" style="height: 200px; object-fit: cover;" alt="${user.displayName || 'User'}" />
        <div class="card-body">
          <h6 class="card-title mb-1">
            ${user.displayName || 'Unnamed'} ${badge} ${platformIcons}
          </h6>
          <small class="text-muted d-block">${user.niches || 'Creator'}</small>
          <small class="text-muted">${user.userLocation?.city || ''}${user.userLocation?.city && user.userLocation?.state ? ', ' : ''}${user.userLocation?.state || ''}</small>
        </div>
      </div>
    </a>`;
  creatorsGrid.appendChild(card);
});

    }

function filterCreators() { 
  const search = searchInput.value.toLowerCase();
  const niche = nicheFilter.value.toLowerCase();
  const location = locationFilter.value.toLowerCase();
  const platform = platformFilter.value.toLowerCase();
  const contentType = contentTypeFilter.value.toLowerCase(); // ðŸ‘ˆ new line

  const filtered = creators.filter(user => {
    const name = user.displayName?.toLowerCase() || "";
    const username = user.username?.toLowerCase() || "";
    const userNiche = user.niches?.toLowerCase?.() || "";
    const userContent = user.contentTypes?.toLowerCase?.() || ""; // ðŸ‘ˆ new line
    const state = user.userLocation?.state?.toLowerCase() || "";
    const verified = user.verifiedPlatforms || {};

    const matchesSearch =
      username.includes(search) || name.includes(search) || userNiche.includes(search);

    const matchesNiche = !niche || userNiche === niche;
    const matchesLocation = !location || state === location;
    const matchesPlatform = !platform || verified[platform] === true;
    const matchesContentType = !contentType || userContent.includes(contentType); // ðŸ‘ˆ new line

    return matchesSearch && matchesNiche && matchesLocation && matchesPlatform && matchesContentType;
  });

  renderCreators(filtered);
}


searchInput.addEventListener("input", filterCreators);
contentTypeFilter.addEventListener("change", filterCreators);
nicheFilter.addEventListener("change", filterCreators);
locationFilter.addEventListener("change", filterCreators);
platformFilter.addEventListener("change", filterCreators);

    fetchCreators();
  </script>

</body>
</html>
